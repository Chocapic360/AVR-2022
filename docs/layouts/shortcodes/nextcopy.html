 {{$level := newScratch }} {{ if (eq .Page.Weight 0) }} {{$level.Set "level" 1}} {{$level.Set "sections" .Page.Sections}} {{$level.Set "weight" 0}} {{ else }} {{ if (eq .Page.Parent.Weight 0) }} {{$level.Set "level" 2}} {{$level.Set "sections" .Page.Sections}}
{{$level.Set "weight" 0}} {{ else }} {{ if (eq .Page.Parent.Parent.Weight 0) }} {{$level.Set "level" 3}} {{$level.Set "sections" .Page.Parent.Sections}} {{$level.Set "weight" .Page.Weight}} {{ end }} {{ end }} {{ end }}

<br> {{$levelPerm := $level.Get "level"}} {{$levelSections := $level.Get "sections"}} {{$levelWeight := $level.Get "weight"}} {{$levelNext := $level.Get "weight"}} {{$level.Set "success" 0}} {{$level.Set "prevsuccess" 0}} {{ if (eq $levelPerm 3) }} {{$weightParent
:= .Page.Parent.Weight}} {{ range $levelSections }} {{if (eq .Weight (add $levelWeight -1))}}
<a href="{{ .Permalink }}"><button>Prev</button></a> {{$level.Set "prevsuccess" 1}} {{ end }} {{if (eq .Weight (add $levelWeight 1))}}
<a href="{{ .Permalink }}"><button>Next</button></a> {{$level.Set "success" 1}} {{ end }} {{ end }} {{ range .Page.Parent.Parent.Sections }} {{if (eq 0 ($level.Get "success"))}} {{if (eq .Weight (add $weightParent 1))}}
<a href="{{ .Permalink }}"><button>Next</button></a> {{$level.Set "success" 1}} {{ end }} {{ end }} {{ end }} {{ end }} {{ if (eq $levelPerm 2) }} {{$weightParent := .Page.Parent.Weight}} {{ range .Page.Sections }} {{if (eq .Weight 1)}}
<a href="{{ .Permalink }}"><button>Next</button> </a> {{$level.Set "success" 1}} {{ end }} {{ end }} {{ end }}